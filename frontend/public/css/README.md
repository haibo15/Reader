# CSS 文件结构说明

## 重构后的文件组织

本项目采用模块化的CSS架构，将样式按功能模块进行拆分，提高代码的可维护性和可读性。

### 核心文件

- **`base.css`** - 基础样式重置和全局样式
- **`layout.css`** - 布局相关的样式
- **`components.css`** - 通用组件样式
- **`utilities.css`** - 工具类样式

### 功能模块文件

- **`pages.css`** - 页面核心样式（主入口文件）
- **`document-history.css`** - 文档历史记录相关样式
- **`chapters.css`** - 章节相关样式
- **`upload.css`** - 文件上传相关样式
- **`modal.css`** - 模态对话框样式
- **`audio-player.css`** - 音频播放器样式
- **`status.css`** - 状态样式（统一管理）

## 文件大小对比

### 重构前
- `pages.css`: 8.0KB, 480行

### 重构后
- `pages.css`: ~1.2KB, 40行（主入口）
- `document-history.css`: ~2.5KB, 80行
- `chapters.css`: ~2.8KB, 90行
- `upload.css`: ~1.5KB, 50行
- `modal.css`: ~1.8KB, 60行
- `audio-player.css`: ~2.0KB, 65行
- `status.css`: ~0.8KB, 25行

## 使用方式

### 在HTML中引入
```html
<!-- 引入主样式文件 -->
<link rel="stylesheet" href="css/pages.css">
```

### 在JavaScript中动态加载
```javascript
// 按需加载特定模块
const loadCSS = (filename) => {
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = `css/${filename}.css`;
    document.head.appendChild(link);
};

// 示例：只加载音频播放器样式
loadCSS('audio-player');
```

## 重构优势

1. **模块化**: 每个文件专注于特定功能，职责清晰
2. **可维护性**: 更容易定位和修改特定功能的样式
3. **可复用性**: 模块可以独立使用，便于在其他项目中复用
4. **性能优化**: 支持按需加载，减少不必要的CSS加载
5. **团队协作**: 不同开发者可以并行修改不同模块

## 命名规范

- 文件名使用kebab-case（短横线分隔）
- 类名使用kebab-case
- 状态类使用语义化命名（如：`status-pending`、`status-completed`）
- 组件类使用功能前缀（如：`modal-`、`player-`、`chapter-`）

## 注意事项

1. `pages.css`作为主入口文件，通过`@import`导入其他模块
2. 避免在不同模块中重复定义相同的样式
3. 状态样式统一在`status.css`中管理
4. 新增功能模块时，创建对应的CSS文件并在`pages.css`中导入

## 章节列表表格化更新

### 更新概述

将原来的卡片式章节列表改为表格式显示，每一章显示为一行，提供更紧凑和结构化的信息展示。

### 主要改进

#### 1. 显示方式优化
- **原来**: 卡片式布局，每个章节占用较大空间
- **现在**: 表格式布局，每行显示一个章节，信息更紧凑

#### 2. 信息展示优化
- **序号**: 清晰显示章节顺序
- **标题**: 限制为10个字符，超出部分用省略号显示，鼠标悬停显示完整标题
- **文本长度**: 显示字符数统计
- **文本状态**: 文本提取状态
- **音频状态**: 音频生成状态
- **操作按钮**: 查看内容功能（移除了图标）

#### 3. 交互功能增强
- **全选/取消全选**: 表头复选框控制所有章节选择
- **单选**: 每行独立的复选框
- **状态更新**: 音频生成后自动更新状态显示

### 表格结构

```
┌─────┬─────┬──────────┬──────────┬──────────┬──────────┬──────────┐
│ 选择│ 序号│ 章节标题 │ 文本长度 │ 文本状态 │ 音频状态 │ 操作     │
├─────┼─────┼──────────┼──────────┼──────────┼──────────┼──────────┤
│ ☑️  │  1  │ 前言     │ 4239字符 │ 已提取   │ 待生成   │ 查看     │
│ ☑️  │  2  │ 1、牛市...│ 136字符  │ 已提取   │ 待生成   │ 查看     │
└─────┴─────┴──────────┴──────────┴──────────┴──────────┴──────────┘
```

### 技术实现

#### 1. HTML结构
```html
<table class="chapters-table">
    <thead>
        <tr>
            <th width="50">
                <input type="checkbox" id="selectAllChapters" checked onchange="FileDisplay.toggleAllChapters(this)">
            </th>
            <th width="60">序号</th>
            <th>章节标题</th>
            <th width="120">文本长度</th>
            <th width="100">文本状态</th>
            <th width="100">音频状态</th>
            <th width="100">操作</th>
        </tr>
    </thead>
    <tbody>
        <!-- 章节行 -->
    </tbody>
</table>
```

#### 2. CSS样式
- **表格样式**: 现代化的表格设计，支持悬停效果
- **状态徽章**: 统一的状态显示样式（无图标）
- **响应式设计**: 移动端适配
- **标题列宽**: 调整为120px，适配10字符限制

#### 3. JavaScript功能
- **全选控制**: `toggleAllChapters()` 方法
- **选中获取**: `getSelectedChapters()` 方法
- **状态更新**: `updateChapterStatus()` 方法
- **标题截断**: 限制为10个字符

### 修改的文件

#### 前端文件
- `frontend/public/js/fileDisplay.js` - 章节显示逻辑
- `frontend/public/css/chapters.css` - 表格样式
- `frontend/public/js/audioGenerator.js` - 音频生成状态更新

### 使用方式

#### 1. 查看章节列表
上传文档后，章节列表会自动以表格形式显示。

#### 2. 选择章节
- 使用表头的全选复选框选择所有章节
- 使用每行的复选框选择特定章节

#### 3. 查看内容
点击"查看"按钮打开章节内容模态框。

#### 4. 生成音频
选择章节后，点击"生成选中章节"按钮。

### 优势

1. **空间效率**: 表格布局更紧凑，显示更多信息
2. **信息清晰**: 结构化的信息展示，便于快速浏览
3. **操作便捷**: 全选功能和批量操作
4. **状态明确**: 清晰的状态指示器
5. **响应式**: 支持不同屏幕尺寸
6. **简洁设计**: 移除冗余图标，界面更清爽

### 后续优化建议

1. **排序功能**: 支持按标题、长度等排序
2. **搜索功能**: 在章节列表中搜索特定章节
3. **批量操作**: 支持批量删除、移动等操作
4. **导出功能**: 支持导出章节列表为CSV等格式
5. **自定义列宽**: 允许用户调整列宽
